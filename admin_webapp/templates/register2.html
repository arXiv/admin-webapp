{%- extends "base/base.html" %}
{% block content %}
<div class="columns">
  <div class="column">

    <h1>Register for the first time (Step 2 of 2)</h1>
      <div>
        <p>Email: {{ email }}</p>
        <p>Username: {{ username }}</p>

        <p>
          Please supply your correct name and affiliation.
        </p>
        <p>
          It is a violation of our policies to misrepresent your identity or institutional affiliation. Claimed affiliation should be current in the conventional sense: e.g., physical presence, funding, email address, mention on institutional web pages, etc. Misrepresentation of identity or affiliation, for any reason, is possible grounds for immediate and permanent suspension.
        </p>
        <br/>
      </div>
      <form action="{{ url_for('ui.register2') }}?next_page={{ next_page|urlencode }}" method="POST">
        {{ form.csrf_token }}

        {% with field = form.forename %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}


        {% with field = form.surname %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.suffix %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.affiliation %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.country %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.status %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.groups %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">
                <div class="{{ ul_class }}">
                  {% for value, label, checked in field.iter_choices() %}
                    <div class="{{ li_class }}">
                      <input type="checkbox" name="{{ field.name }}" value="{{ value }}" id="{{ field.id }}-{{ value }}" {% if checked %}checked{% endif %}>
                      <label for="{{ field.id }}-{{ value }}">{{ label }}</label>
                    </div>
                  {% endfor %}
                </div>

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.default_category %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">
                <select id="{{ field.id }}" name="{{ field.name }}">
                  <option value="">Select an option</option>
                  {% for group_label, items in field.choices %}
                      <optgroup label="{{ group_label }}">
                          {% for value, label in items %}
                              <option value="{{ value }}"{% if value == field.data %} selected{% endif %}>{{ label }}</option>
                          {% endfor %}
                      </optgroup>
                  {% endfor %}
              </select>
              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.url %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="input is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="input field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}

        {% with field = form.remember_me %}
        {{ field.label(class="label") }}
        <div class="columns">
          <div class="column">

            <div class="field">

              <div class="control">

                {% if field.errors %}
                  {{ field(class="checkbox is-warning field-body")|safe }}
                {% else %}
                  {{ field(class="checkbox field-body")|safe }}
                {% endif %}
                {% if field.errors %}
                  <div class="help is-warning">
                    {% for error in field.errors %}
                        {{ error }}
                    {% endfor %}
                  </div>
                {% endif %}

              </div>

            </div>
          </div>
          <div class="column">
            {% if field.description %}
            <p class="is-marginless help has-text-grey">
              {{ field.description|safe }}
            </p>
            {% endif %}
          </div>
        </div>
        {% endwith %}
        

        <div class="control">
          <input type="submit" class="button is-success" value="Register"></input>
        </div>


      </div>
    </form>
  </div>
</div>
{% endblock content %}
