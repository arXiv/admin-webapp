{%- extends "base.html" -%}
{%- from "macros.html" import render_pagination with context -%}

{%- block content -%}
<h1>{{title}}</h1>

{%- if count > 0 -%}
<div>Found {{count}} users. Page {{pagination.page}} of {{pagination.pages}}.</div>
{%- else -%}
<!-- <div>None found in past {{days_back}} days, <a href='{{url_for(request.endpoint, days_back=days_back*10)}}'>see {{days_back*10}} days back</a></div> -->
{% endif -%}

<table class="table">
  <tr>
    <th>Nickname</th><th>E-mail</th><th>Name</th><th>Joined on</th><th># Sessions</th><th>Email Verified?</th>
  </tr>
  {%for user in users%}
  <tr>
    <td><a href="{{url_for('user.display', user_id=user.user_id)}}">{{user.nickname}}</a></td>
    <td><a href=''>
        {{user.email}}</a>
    </td>
    <td>{{user.last_name}}, {{user.first_name}}</td>
    <td>{{user.joined_date | unix_to_datetime}}</td>
    <td>{{user.session_count}}</td>
    <td>{% if user.flag_email_verified%}Y{%else%}N{%endif%}</td>
  </tr>
  {%endfor%}
</table>

{{ render_pagination(pagination, request.endpoint) }}
{%- endblock content -%}
